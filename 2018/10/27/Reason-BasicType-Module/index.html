
<!DOCTYPE html><html lang="zh-tw">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1" theme-name="Stellar" theme-version="1.29.1">
  
  <meta name="generator" content="Hexo 7.3.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  
  <title>Reason-BasicType-Module - 湯瑪士的部落格</title>

  
    <meta name="description" content="Module模組就像是一個小的檔案 可以用 let binding 內嵌 module 建立使用 module 這個關鍵字來宣告 12345678910module School &#x3D; &#123;  type profession &#x3D; Teacher | Director;  let person1 &#x3D; Teacher;  let getProfession &#x3D; (person) &#x3D;&gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="Reason-BasicType-Module">
<meta property="og:url" content="https://horsekitlin.github.io/2018/10/27/Reason-BasicType-Module/index.html">
<meta property="og:site_name" content="湯瑪士的部落格">
<meta property="og:description" content="Module模組就像是一個小的檔案 可以用 let binding 內嵌 module 建立使用 module 這個關鍵字來宣告 12345678910module School &#x3D; &#123;  type profession &#x3D; Teacher | Director;  let person1 &#x3D; Teacher;  let getProfession &#x3D; (person) &#x3D;&gt;">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2018-10-27T10:11:14.000Z">
<meta property="article:modified_time" content="2024-07-25T16:40:45.599Z">
<meta property="article:author" content="Tomas Lin">
<meta property="article:tag" content="Javascript">
<meta property="article:tag" content="IThome2018">
<meta property="article:tag" content="Reason">
<meta name="twitter:card" content="summary">
  
  
  
  <meta name="keywords" content="Javascript,IThome2018,Reason">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.29.1">

  
    <link rel="shortcut icon" href="/img/avatar.png">
  

  

  
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="post" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/img/avatar.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">湯瑪士的部落格</div><div class="sub cap">技術手扎！不定期更新</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="站內搜尋"></form><div id="search-result"></div><div class="search-no-result">沒有找到內容！</div></div>


<nav class="menu dis-select"></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">最近更新</span></div><div class="widget-body fs14"><a class="item title" href="/2025/03/13/Day01-Go%E7%B5%90%E6%A7%8B%E9%AB%94%E8%88%87%E6%96%B9%E6%B3%95%E8%A9%B3%E8%A7%A3/"><span class="title">Day01-Go結構體與方法詳解</span></a><a class="item title" href="/2023/10/01/Day-06-Deploy-https-website/"><span class="title">Day-06-Deploy-https-website-part01</span></a><a class="item title" href="/2017/10/27/Typescript-TypescriptIn5Minutes/"><span class="title">TypeScript-TypeScriptIn5Minutes</span></a><a class="item title" href="/2018/11/29/material-ui-themes/"><span class="title">material-ui-themes</span></a><a class="item title" href="/2017/10/29/Typescript-Gulp/"><span class="title">TypeScriptWithGulp</span></a><a class="item title" href="/2017/11/03/Typescript-Interfaces/"><span class="title">Typescript-Interfaces</span></a><a class="item title" href="/2017/11/07/Typescript-JSX/"><span class="title">Typescript-JSX</span></a><a class="item title" href="/2017/10/30/Typescript-MigratingFromJavascript/"><span class="title">Typescript-Migrating from Javascript</span></a><a class="item title" href="/2017/10/31/Typescript-BasicType/"><span class="title">Typescript-BasicType</span></a><a class="item title" href="/2017/11/04/Typescript-Classes/"><span class="title">Typescript-Classes</span></a></div></widget>
</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/horsekitlin" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/08a41b181ce68.svg"/></a></div></footer>
</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">首頁</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">網誌</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/Reason/">Reason</a></div>
<div class="flex-row" id="post-meta"><span class="text created">發布於：<time datetime="2018-10-27T10:11:14.000Z">2018-10-27</time></span><span class="sep updated"></span><span class="text updated">更新於：<time datetime="2024-07-25T16:40:45.599Z">2024-07-26</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>Reason-BasicType-Module</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><h1 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h1><p>模組就像是一個小的檔案</p>
<p>可以用 <code>let binding</code> 內嵌 module</p>
<h2 id="建立"><a href="#建立" class="headerlink" title="建立"></a>建立</h2><p>使用 <code>module</code> 這個關鍵字來宣告</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module School = &#123;</span><br><span class="line">  type profession = Teacher | Director;</span><br><span class="line"></span><br><span class="line">  let person1 = Teacher;</span><br><span class="line">  let getProfession = (person) =&gt;</span><br><span class="line">    switch(person) &#123;</span><br><span class="line">    | Teacher =&gt; &quot;A teacher&quot;</span><br><span class="line">    | Director =&gt; &quot;A director&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>模組中的值(包含型別) 可以像 <code>record</code> 一樣使用 <code>.</code> 來存取</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">module School = &#123;</span><br><span class="line">  type profession = Teacher | Director;</span><br><span class="line"></span><br><span class="line">  let person1 = Teacher;</span><br><span class="line">  let getProfession = (person) =&gt;</span><br><span class="line">    switch(person) &#123;</span><br><span class="line">    | Teacher =&gt; &quot;A teacher&quot;</span><br><span class="line">    | Director =&gt; &quot;A director&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">let anotherPerson: School.profession = School.Teacher;</span><br><span class="line">print_endline(School.getProfession(anotherPerson));</span><br></pre></td></tr></table></figure>

<p>上面的範例中使用了 <code>School.profession</code> 的類型來宣告變數</p>
<p>巢狀的 <code>module</code> 也是一樣的使用方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module Mymodule = &#123;</span><br><span class="line">  module NestedModule = &#123;</span><br><span class="line">    let message = &quot;Hello&quot;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">let message =  Mymodule.NestedModule.message;</span><br><span class="line">print_endline(message);</span><br></pre></td></tr></table></figure>

<h2 id="open-Module"><a href="#open-Module" class="headerlink" title="open Module"></a>open Module</h2><p>要一直前置加上模組名稱會很繁瑣</p>
<p>所以可以利用 <code>open</code> 來簡化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/* let p: School.profession = School.getProfession(School.person1); */</span><br><span class="line">/*上述程式碼可以修改為*/</span><br><span class="line">open School;</span><br><span class="line">let p: profession = getProfession(person1);</span><br></pre></td></tr></table></figure>

<p><strong>note: 要謹慎使用 open 最好在 local scope 中使用，否則會很難了解變數來源</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let p = &#123;</span><br><span class="line">  open School;</span><br><span class="line">  print_endline(&quot;hello!&quot;);</span><br><span class="line">  getProfession(person1);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="擴充模組"><a href="#擴充模組" class="headerlink" title="擴充模組"></a>擴充模組</h2><p>使用 <code>include</code> 讓 module 靜態擴展到另一個新的模組</p>
<p>這句話很難理解吧！</p>
<p>看個範例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">module BaseComponent = &#123;</span><br><span class="line">  let defaultGreeting = &quot;Hello&quot;;</span><br><span class="line">  let getAudience = (~excited) =&gt; excited ? &quot;hello&quot; : &quot;world&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module ActualComponent = &#123;</span><br><span class="line">  include BaseComponent;</span><br><span class="line">  let defaultGreeting = &quot;Hey&quot;;</span><br><span class="line">  let render = () =&gt; defaultGreeting ++ &quot; &quot; ++ getAudience(~excited=true);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">print_endline(BaseComponent.defaultGreeting); /* Hello */</span><br><span class="line">print_endline(ActualComponent.defaultGreeting); /* Hey */</span><br></pre></td></tr></table></figure>

<p>上述範例中 <code>ActualComponent</code> 因為有 <code>include BaseComponent;</code></p>
<p>所以會擁有 <code>BaseComponent</code> 的特性和方法</p>
<p>但是也可以在下面使用 <code>let</code> 來複寫某些參數或方法</p>
<p><strong>note: <code>open</code> 和 <code>include</code>是完全不一樣的 前者是將內容帶到你的 scope 你就不用每次都要加上模組名稱來取值，後者則是複製一份值到新的模組內</strong></p>
<p>在 <code>Reason</code> 中每一個檔案都是一個模組</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*FileA.re*/</span><br><span class="line">let a = 1;</span><br><span class="line">let b = 2;</span><br><span class="line"></span><br><span class="line">/*FileB.re*/</span><br><span class="line">include FileA;</span><br><span class="line">print_endline(a);</span><br></pre></td></tr></table></figure>

<h3 id="標記式"><a href="#標記式" class="headerlink" title="標記式"></a>標記式</h3><p>模組的類型稱為 <code>signature</code></p>
<p>模組的實作是 <code>re</code> 模組的宣告是 <code>rei</code></p>
<p>要建立一個 signature 要使用關鍵字 <code>module type</code></p>
<p>signature 名稱必須是大寫字母開頭</p>
<p>可以放置在 <code>rei</code> 檔案內</p>
<p>可以放在定義的 <code>&#123;&#125;</code> scope 內</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module type EstablishmentType = &#123;</span><br><span class="line">  type profession;</span><br><span class="line">  let getProfession: profession =&gt; string;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>signature 宣告了 module 必須滿足的型態要求</p>
<p>使 module 和 signature 相同</p>
<p>形式如下:</p>
<ul>
<li><code>let x: int;</code> 要求 <code>let</code> 繫結名稱必須是 <code>x</code>，型別是 <code>int</code></li>
<li><code>type t = someType;</code> 要求型別欄位 <code>t</code> 必須與 <code>someType</code> 相同</li>
<li><code>type t;</code> 要求型別欄位 <code>t</code>，但並不強迫任何要求於 t 的實際、具體型別。 我們不能在標記式內使用 <code>t</code> 於其他項目來描述關係，例如 <code>let makePair: t =&gt; (t, t)</code></li>
</ul>
<p>上述 <code>EstablishmentType</code> 範例中</p>
<ul>
<li>宣告一個類型 <code>profession</code></li>
<li>必須要有一個函式來取得 <code>profession</code> 的值</li>
</ul>
<h3 id="擴展-Module-類型"><a href="#擴展-Module-類型" class="headerlink" title="擴展 Module 類型"></a>擴展 Module 類型</h3><p>就像 Module 一樣</p>
<p>可以利用 include 來做擴展 module type</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module type BaseComponent = &#123;</span><br><span class="line">  let defaultGreeting: string;</span><br><span class="line">  let getAudience: (~excited: bool) =&gt; string;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module type ActualComponent = &#123;</span><br><span class="line">  /* the BaseComponent signature is copied over */</span><br><span class="line">  include BaseComponent;</span><br><span class="line">  let render: unit =&gt; string;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>note: BaseComponent是 module type 而不是 module</strong></p>
<p>如果你沒有宣告 module type</p>
<p>可以透過實際的 module 來提取 <code>include (module type of ActualModuleName)</code></p>
<p>例如我們可以繼承 OCmal 中的公用模組 <code>List</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module type MyList = &#123;</span><br><span class="line">  include (module type of List);</span><br><span class="line">  let myListFun: list(&#x27;a) =&gt; list(&#x27;a);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="每個-rei-都是一個標記式"><a href="#每個-rei-都是一個標記式" class="headerlink" title="每個 rei 都是一個標記式"></a>每個 <code>rei</code> 都是一個標記式</h3><p>類似 <code>.re</code> 定義 Reason 模組</p>
<p><code>rei</code> 定義 Reason 模組類型</p>
<p>React.re 的標記式預設是暴露所有模組內欄位</p>
<p>因為沒有包含實作檔案</p>
<p><code>.rei</code> 在生態圈也用來作為相對應模組的文件</p>
<p>紀錄開放的 API</p>
<p><code>Module.re</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type state = int;</span><br><span class="line">let render = (str) =&gt; str;</span><br></pre></td></tr></table></figure>

<p><code>Module.rei</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type state = int;</span><br><span class="line">let render: string =&gt; string;</span><br></pre></td></tr></table></figure>

<h3 id="模組函式-functors"><a href="#模組函式-functors" class="headerlink" title="模組函式(functors)"></a>模組函式(functors)</h3><p>模組可以包含函式</p>
<p>就像在檔案裡面寫函式</p>
<p>但是這還是有些不一樣</p>
<p>因為 module 定義在不同層級</p>
<p>所以我們稱之為 <code>functors</code></p>
<ul>
<li>functors 使用關鍵字 <code>module</code> 而不是 <code>let</code></li>
<li>Functors 接受一個或多個模組作為參數並傳回一個模組</li>
<li>Functors 必須大寫字母開頭（就像是模組&#x2F;標記式）</li>
<li>Functors 必須註解參數</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">module type Comparable = &#123;</span><br><span class="line">  type t;</span><br><span class="line">  let equal: (t, t) =&gt; bool;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module MakeSet = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  /* let&#x27;s use a list as our naive backing data structure */</span><br><span class="line">  type backingType = list(Item.t);</span><br><span class="line">  let empty = [];</span><br><span class="line">  let add = (currentSet: backingType, newItem: Item.t) : backingType =&gt;</span><br><span class="line">    if (ListLabels.exists((x) =&gt; Item.equal(x, newItem), currentSet)) &#123;</span><br><span class="line">      currentSet;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      [</span><br><span class="line">        newItem,</span><br><span class="line">        ...currentSet /* prepend to the set and return it */</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>上述是一個 <code>MakeSet</code> Functor</p>
<p>他接受一個 <code>Comparable</code> 類型的 module</p>
<p>會回傳一個包含此類型的新集合</p>
<p>Functor 也可以和函式一樣使用參數</p>
<p>如下例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">module type Comparable = &#123;</span><br><span class="line">  type t;</span><br><span class="line">  let equal: (t, t) =&gt; bool;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module MakeSet = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  /* let&#x27;s use a list as our naive backing data structure */</span><br><span class="line">  type backingType = list(Item.t);</span><br><span class="line">  let empty = [];</span><br><span class="line">  let add = (currentSet: backingType, newItem: Item.t) : backingType =&gt;</span><br><span class="line">    if (ListLabels.exists((x) =&gt; Item.equal(x, newItem), currentSet)) &#123;</span><br><span class="line">      currentSet;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      [</span><br><span class="line">        newItem,</span><br><span class="line">        ...currentSet /* prepend to the set and return it */</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">module IntPair = &#123;</span><br><span class="line">  type t = (int, int);</span><br><span class="line">  let equal = ((x1, y1), (x2, y2)) =&gt; x1 == x2 &amp;&amp; y1 == y2;</span><br><span class="line">  let create = (x, y) =&gt; (x, y);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module SetOfIntPairs = MakeSet(IntPair);</span><br></pre></td></tr></table></figure>

<h3 id="模組函式類別"><a href="#模組函式類別" class="headerlink" title="模組函式類別"></a>模組函式類別</h3><p>Like with module types, functor types also act to constrain and hide what we may assume about functors. The syntax for functor types are consistent with those for function types, but with types capitalized to represent the signatures of modules the functor accepts as arguments and return values. In the previous example, we’re exposing the backing type of a set; by giving MakeSet a functor signature, we can hide the underlying data structure!</p>
<p><strong>未翻譯</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">module type Comparable = &#123;</span><br><span class="line">  type t;</span><br><span class="line">  let equal: (t, t) =&gt; bool;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module type MakeSetType = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  type backingType;</span><br><span class="line">  let empty: backingType;</span><br><span class="line">  let add: (backingType, Item.t) =&gt; backingType;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module MakeSet: MakeSetType = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  /* let&#x27;s use a list as our naive backing data structure */</span><br><span class="line">  type backingType = list(Item.t);</span><br><span class="line">  let empty = [];</span><br><span class="line">  let add = (currentSet: backingType, newItem: Item.t) : backingType =&gt;</span><br><span class="line">    if (ListLabels.exists((x) =&gt; Item.equal(x, newItem), currentSet)) &#123;</span><br><span class="line">      currentSet;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      [</span><br><span class="line">        newItem,</span><br><span class="line">        ...currentSet /* prepend to the set and return it */</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module IntPair = &#123;</span><br><span class="line">  type t = (int, int);</span><br><span class="line">  let equal = ((x1, y1), (x2, y2)) =&gt; x1 == x2 &amp;&amp; y1 == y2;</span><br><span class="line">  let create = (x, y) =&gt; (x, y);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module SetOfIntPairs = MakeSet(IntPair);</span><br></pre></td></tr></table></figure>

<h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>要小心的是 <code>module</code> 和 <code>functor</code> 在不同樣的語言層級</p>
<p>你無法輕易的將他們傳遞給 <code>record</code> 或 <code>tuple</code></p>
<p>真的不得已的話一定要小心</p>
<p>因為很多時候只需要一個 <code>record</code> 或是 <code>function</code> 就夠了</p>

<div class="article-footer fs14">
    <section id="license">
      <div class="header"><span>授權條款</span></div>
      <div class="body"><p>本文採用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商業性使用-相同方式共享 4.0 國際</a> 許可協議，轉載請註明出處。</p>
</div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">較新文章</div><a href="/2018/10/27/Express-Middleware/">Express-Middleware</a></div><div class="item" id="next"><div class="note">較早文章</div><a href="/2018/10/26/Express-Router/">Express-Router</a></div></section></div>






<footer class="page-footer footnote"><hr><div class="text"><p>本站由 <a href="/">Tomas Lin</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1">Stellar 1.29.1</a> 主題創建。<br>本博客所有文章除特別聲明外，均採用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 許可協議，轉載請註明出處。</p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">本文目錄</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Module"><span class="toc-text">Module</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B"><span class="toc-text">建立</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#open-Module"><span class="toc-text">open Module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%B4%E5%85%85%E6%A8%A1%E7%B5%84"><span class="toc-text">擴充模組</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%99%E8%A8%98%E5%BC%8F"><span class="toc-text">標記式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%B4%E5%B1%95-Module-%E9%A1%9E%E5%9E%8B"><span class="toc-text">擴展 Module 類型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%8F%E5%80%8B-rei-%E9%83%BD%E6%98%AF%E4%B8%80%E5%80%8B%E6%A8%99%E8%A8%98%E5%BC%8F"><span class="toc-text">每個 rei 都是一個標記式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B5%84%E5%87%BD%E5%BC%8F-functors"><span class="toc-text">模組函式(functors)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B5%84%E5%87%BD%E5%BC%8F%E9%A1%9E%E5%88%A5"><span class="toc-text">模組函式類別</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%90%E8%AB%96"><span class="toc-text">結論</span></a></li></ol></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>回到頂部</span></a></div></widget>
</div></aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `剛剛`,
      min: `分鐘前`,
      hour: `小時前`,
      day: `天前`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js`,
    marked: `https://cdn.jsdelivr.net/npm/marked@13.0.1/lib/marked.umd.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>


<!-- required -->
<script src="/js/main.js?v=1.29.1" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    applyThemeToGiscus(theme)
  }

  const applyThemeToGiscus = (theme) => {
    theme = theme === 'auto' ? 'preferred_color_scheme' : theme

    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)

    const messages = {
      light: `切換到淺色模式`,
      dark: `切換到深色模式`,
      auto: `切換到跟隨系統配色`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    }
  })()
</script>


<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
